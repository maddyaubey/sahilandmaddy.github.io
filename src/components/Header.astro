---
import "../styles/global.css";
import "../styles/index.css";

import { Image } from 'astro:assets'
import ganesh from '/src/images/ganesh.png'
---

<header
  data-header
  class="fixed bottom-30 left-0 w-screen h-screen flex items-center justify-center text-[10vw] text-white z-20 isolate"
>

  <h1 class="block text-center text-white md:max-w-none whitespace-nowrap leading-tight md:leading-none">
	<span class="block text-[25vw] md:text-[15vw] md:inline">SAHIL</span>
	<span class="block text-[15vw] md:text-[15vw] md:inline">&</span>
	<span class="block text-[25vw] md:text-[15vw] md:inline">MADDY</span>
  </h1>


  <div class="absolute bottom-0 left-1/2 -translate-x-1/2 pb-20">
    <a href="#about-section"><Image
				id="scroll-icon"
				class="max-h-[10dvh] w-auto objects-contain opacity-bg-0 flex align-center invert"
				src={ganesh}
				alt=""
		/>
	</a>
  </div>

</header>


<script>
  import { gsap } from 'gsap'
  import { ScrollTrigger } from 'gsap/ScrollTrigger'
  import { DOMLoaded } from '@/ts/events'

  DOMLoaded(() => {
    gsap.registerPlugin(ScrollTrigger)
    const hero = document.querySelector('[data-hero]') as HTMLElement
    const projects = document.querySelector('[data-projects]') as HTMLElement
    const header = document.querySelector('[data-header]') as HTMLElement
	const rect = header.getBoundingClientRect()

    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: hero,
        start: 'top top',
        end: 'bottom top',
        scrub: true,
      },
    })

    const tl2 = gsap.timeline({
      scrollTrigger: {
        trigger: projects,
        start: 'top 5%',
        end: 'top -5%',
        scrub: true,
      },
    })

    tl.to(header, 
	{
	y:-400,
	opacity:0, 
	ease:"power2.out",
	scrub:true,
	duration: 0.5,
	pointerEvents: "none",
	})

    tl2.to(header, { color: '#022859', duration: 1 })
  })

  DOMLoaded(() => {
  const scrollIcon = document.getElementById("scroll-icon")!
  scrollIcon.addEventListener("click", () => {
	gsap.to(window, {
		duration: 0.6,
		scrollTo: {
		y: "#about-section",
		},
		ease: "power2.out"
		});
	});  
  });

	DOMLoaded(() => {
	gsap.registerPlugin(ScrollTrigger)
	const hero = document.querySelector('[data-hero]') as HTMLElement
	const projects = document.querySelector('[data-projects]') as HTMLElement
	const header = document.querySelector('[data-header]') as HTMLElement
	const scrollIcon = document.getElementById("scroll-icon")!
	const tl = gsap.timeline({
		scrollTrigger: {
		trigger: hero,
		start: 'top top',
		end: 'bottom top',
		scrub: true,
		},
	})

	tl.to(scrollIcon, 
	{ opacity:0,
	scrub:true,
	ease:'power2.out', 
	duration: 0.25 })

	})
</script>
